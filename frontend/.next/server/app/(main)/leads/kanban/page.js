(()=>{var e={};e.id=929,e.ids=[929],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},87298:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(50482),a=r(69108),n=r(62563),o=r.n(n),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(main)",{children:["leads",{children:["kanban",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99831)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/leads/kanban/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22758)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,12962)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/leads/kanban/page.tsx"],u="/(main)/leads/kanban/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/leads/kanban/page",pathname:"/leads/kanban",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67774:(e,t,r)=>{Promise.resolve().then(r.bind(r,95311))},95311:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95344),a=r(3729);!function(){var e=Error("Cannot find module '@hello-pangea/dnd'");throw e.code="MODULE_NOT_FOUND",e}();var n=r(85524),o=r(20439),i=r(51838),l=r(18117),d=r(43989),c=r(65489),u=r(95252),p=r(20783),x=r.n(p);let m=[{id:"lead",name:"New Leads",color:"bg-gray-100",textColor:"text-gray-700"},{id:"contacted",name:"Contacted",color:"bg-blue-100",textColor:"text-blue-700"},{id:"qualified",name:"Qualified",color:"bg-green-100",textColor:"text-green-700"},{id:"proposal",name:"Proposal",color:"bg-yellow-100",textColor:"text-yellow-700"},{id:"negotiation",name:"Negotiation",color:"bg-orange-100",textColor:"text-orange-700"},{id:"won",name:"Won",color:"bg-emerald-100",textColor:"text-emerald-700"},{id:"lost",name:"Lost",color:"bg-red-100",textColor:"text-red-700"}];function g(){let e=(0,d.p)(),{can:t}=(0,c.g)(),[r,p]=(0,a.useState)({}),[g,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{y()},[]);let y=async()=>{try{h(!0);let e=await l.Z.get("/leads/kanban/board");p(e.data)}catch(t){e.error("Failed to load kanban board")}finally{h(!1)}},f=async t=>{if(!t.destination)return;let{source:r,destination:s,draggableId:a}=t;if(r.droppableId!==s.droppableId)try{let t=s.droppableId;await l.Z.put(`/leads/${a}/stage`,{stage:t,status:"won"===t?"won":"lost"===t?"lost":void 0}),e.success("Lead stage updated successfully"),y()}catch(t){e.error("Failed to update lead stage")}};return g?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx(u.T,{size:"lg"})}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Sales Pipeline"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{className:"p-2 bg-white text-primary-600 shadow-sm rounded-md",title:"Kanban View",children:s.jsx(n.Z,{className:"w-4 h-4"})}),s.jsx(x(),{href:"/leads/list",className:"p-2 text-gray-500 hover:text-gray-900 rounded-md",title:"List View",children:s.jsx(o.Z,{className:"w-4 h-4"})})]}),t("Lead","create")&&(0,s.jsxs)(x(),{href:"/leads/create",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"New Lead"]})]})]}),s.jsx(Object(function(){var e=Error("Cannot find module '@hello-pangea/dnd'");throw e.code="MODULE_NOT_FOUND",e}()),{onDragEnd:f,children:s.jsx("div",{className:"grid grid-cols-7 gap-4 overflow-x-auto",children:m.map(e=>(0,s.jsxs)("div",{className:"flex flex-col min-w-[250px]",children:[(0,s.jsxs)("div",{className:`${e.color} p-3 rounded-t-lg border-b-2 border-gray-300`,children:[s.jsx("h3",{className:`font-semibold text-sm ${e.textColor}`,children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:[r[e.id]?.length||0," leads"]})]}),s.jsx(Object(function(){var e=Error("Cannot find module '@hello-pangea/dnd'");throw e.code="MODULE_NOT_FOUND",e}()),{droppableId:e.id,children:(t,a)=>(0,s.jsxs)("div",{ref:t.innerRef,...t.droppableProps,className:`bg-gray-50 p-2 min-h-[600px] space-y-2 ${a.isDraggingOver?"bg-blue-50":""}`,children:[r[e.id]?.map((e,t)=>s.jsx(Object(function(){var e=Error("Cannot find module '@hello-pangea/dnd'");throw e.code="MODULE_NOT_FOUND",e}()),{draggableId:e.id,index:t,children:(t,r)=>s.jsxs("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:`bg-white p-3 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-move border border-gray-200 ${r.isDragging?"shadow-lg ring-2 ring-primary-500":""}`,children:[s.jsx(x(),{href:`/leads/${e.id}`,children:s.jsx("h4",{className:"font-medium text-sm text-gray-900 hover:text-primary-600",children:e.name})}),e.company&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.company}),e.value&&s.jsxs("p",{className:"text-xs font-semibold text-green-600 mt-2",children:["$",Number(e.value).toLocaleString()]}),e.priority&&"medium"!==e.priority&&s.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 text-xs rounded ${"high"===e.priority?"bg-orange-100 text-orange-700":"urgent"===e.priority?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.priority}),e.nextFollowUpAt&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(e.nextFollowUpAt).toLocaleDateString()]})]})},e.id)),t.placeholder,(!r[e.id]||0===r[e.id].length)&&s.jsx("div",{className:"text-center text-gray-400 text-sm py-8",children:"No leads"})]})})]},e.id))})})]})}},95252:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(95344);function a({size:e="md",className:t=""}){return s.jsx("div",{className:`${{sm:"h-4 w-4 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3"}[e]} animate-spin rounded-full border-gray-300 border-t-primary-600 ${t}`,role:"status","aria-label":"Loading",children:s.jsx("span",{className:"sr-only",children:"Loading..."})})}},65489:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var s=r(67857);let a=()=>{let{user:e}=(0,s.a)();return{can:(t,r)=>{if(!e)return!1;if(e.roles?.some(e=>"admin"===e.toLowerCase()||"administrator"===e.toLowerCase()))return!0;if(!e.permissions)return!1;let s=e.permissions[t];if(!s)return!1;let a="none";switch(r){case"create":a=s.createLevel;break;case"read":a=s.readLevel;break;case"update":a=s.updateLevel;break;case"delete":a=s.deleteLevel}return"none"!==a&&void 0!==a},getScope:(t,r)=>{if(!e||!e.permissions||!e.permissions[t])return"none";if(e.roles?.some(e=>"admin"===e.toLowerCase()))return"all";let s=e.permissions[t],a="none";switch(r){case"create":a=s.createLevel;break;case"read":a=s.readLevel;break;case"update":a=s.updateLevel;break;case"delete":a=s.deleteLevel}return a},user:e}}},43989:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var s=r(92373);function a(){let{showToast:e}=(0,s.useToastContext)();return{success:t=>e("success",t),error:t=>e("error",t),warning:t=>e("warning",t),info:t=>e("info",t)}}},67857:(e,t,r)=>{"use strict";r.d(t,{I:()=>n,a:()=>o});var s=r(18117),a=r(3729);let n={register:async e=>{let t=await s.Z.post("/auth/register",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data},login:async(e,t)=>{let r=await s.Z.post("/auth/login",{email:e,password:t});return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>null,getUser:()=>null,isAuthenticated:()=>!!n.getToken()},o=()=>{let[e,t]=(0,a.useState)(null),[r,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{let e=n.getUser();if(e&&t(e),n.getToken())try{let e=await s.Z.get("/auth/profile");if(e.data.user){let r=e.data.user;localStorage.setItem("user",JSON.stringify(r)),t(r)}}catch(e){console.error("Auth refresh failed",e)}o(!1)})()},[]),{user:e,loading:r,isAuthenticated:!!e}}},85524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},20439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},51838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},22254:(e,t,r)=>{e.exports=r(14767)},99831:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let s=(0,r(86843).createProxy)(String.raw`/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/leads/kanban/page.tsx`),{__esModule:a,$$typeof:n}=s,o=s.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6291,1934,783,3553],()=>r(87298));module.exports=s})();