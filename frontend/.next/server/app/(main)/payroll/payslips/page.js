(()=>{var e={};e.id=5991,e.ids=[5991],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},85039:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>p});var r=s(50482),a=s(69108),o=s(62563),n=s.n(o),l=s(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let p=["",{children:["(main)",{children:["payroll",{children:["payslips",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,84201)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/payroll/payslips/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22758)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,12962)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/payroll/payslips/page.tsx"],d="/(main)/payroll/payslips/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/payroll/payslips/page",pathname:"/payroll/payslips",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},8121:(e,t,s)=>{Promise.resolve().then(s.bind(s,45619))},45619:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95344),a=s(43989),o=s(3729),n=s(53689),l=s(20783),i=s.n(l),p=s(73050);function c(){let e=(0,a.p)(),{formatCurrency:t}=(0,p.U)(),[s,l]=(0,o.useState)(new Date().getMonth()+1),[c,d]=(0,o.useState)(new Date().getFullYear()),[x,u]=(0,o.useState)(!1),[m,y]=(0,o.useState)([]);(0,o.useEffect)(()=>{h()},[s,c]);let h=async()=>{try{u(!0);let e=await n.v.getList(s,c);y(e)}catch(e){console.error("Failed to load payrolls:",e)}finally{u(!1)}},g=async t=>{if(confirm("Are you sure you want to approve this payroll? This will post accounting entries."))try{await n.v.approve(t),e.success("Payroll approved successfully"),h()}catch(t){console.error(t),e.error("Failed to approve payroll")}},f=async t=>{try{let e=await n.v.downloadPayslip(t),s=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=s,r.setAttribute("download",`Payslip_${t}.pdf`),document.body.appendChild(r),r.click(),r.remove()}catch(t){console.error(t),e.error("Failed to download payslip")}};return r.jsx("div",{className:"px-4 py-6 sm:px-0",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Payslips & Payroll History"}),r.jsx(i(),{href:"/payroll/run",children:r.jsx("span",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Run Payroll"})})]}),r.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),r.jsx("select",{value:s,onChange:e=>l(Number(e.target.value)),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md border",children:Array.from({length:12},(e,t)=>r.jsx("option",{value:t+1,children:new Date(0,t).toLocaleString("default",{month:"long"})},t+1))})]}),(0,r.jsxs)("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),r.jsx("input",{type:"number",value:c,onChange:e=>d(Number(e.target.value)),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md border"})]}),r.jsx("div",{className:"md:col-span-2 text-right"})]})}),r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:x?r.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):0===m.length?r.jsx("div",{className:"p-12 text-center text-gray-500",children:"No payroll records found for this period."}):(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"relative px-6 py-3",children:r.jsx("span",{className:"sr-only",children:"Actions"})})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{className:"ml-0",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.employee.firstName," ",e.employee.lastName]}),r.jsx("div",{className:"text-sm text-gray-500",children:e.employee.employeeId})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.employee.department?.name||"-"}),"// ... inside map",r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t(e.grossSalary)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:t(e.totalDeductions)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:t(e.netSalary)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status.toUpperCase()})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:["draft"===e.status&&r.jsx("button",{onClick:()=>g(e.id),className:"text-green-600 hover:text-green-900 mr-4",children:"Approve"}),r.jsx("button",{onClick:()=>f(e.id),className:"text-primary-600 hover:text-primary-900 mr-4",children:"View Slip"})]})]},e.id))})]})})]})})}},43989:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var r=s(92373);function a(){let{showToast:e}=(0,r.useToastContext)();return{success:t=>e("success",t),error:t=>e("error",t),warning:t=>e("warning",t),info:t=>e("info",t)}}},53689:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var r=s(18117);let a={getComponents:async()=>(await r.Z.get("/payroll/components")).data,createComponent:async e=>(await r.Z.post("/payroll/components",e)).data,updateComponent:async(e,t)=>(await r.Z.put(`/payroll/components/${e}`,t)).data,deleteComponent:async e=>(await r.Z.delete(`/payroll/components/${e}`)).data,getEmployeeStructure:async e=>(await r.Z.get(`/payroll/structure/${e}`)).data,updateEmployeeStructure:async(e,t)=>(await r.Z.put(`/payroll/structure/${e}`,t)).data,process:async e=>(await r.Z.post("/payroll/process",e)).data}},22254:(e,t,s)=>{e.exports=s(14767)},84201:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/payroll/payslips/page.tsx`),{__esModule:a,$$typeof:o}=r,n=r.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[6291,1934,783,3553],()=>s(85039));module.exports=r})();