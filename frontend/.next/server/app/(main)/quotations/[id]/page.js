(()=>{var e={};e.id=6953,e.ids=[6953],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},93431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d});var a=s(50482),r=s(69108),i=s(62563),n=s.n(i),l=s(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["(main)",{children:["quotations",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,91381)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/quotations/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22758)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,12962)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/quotations/[id]/page.tsx"],x="/(main)/quotations/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(main)/quotations/[id]/page",pathname:"/quotations/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44444:(e,t,s)=>{Promise.resolve().then(s.bind(s,38883))},38883:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(95344),r=s(3729),i=s(22254),n=s(18117),l=s(43989),c=s(65489),d=s(95252),o=s(73050),x=s(63024),m=s(75695),p=s(69224);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,p.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var u=s(96885),y=s(37121),g=s(71206),b=s(7060),j=s(88534),w=s(20783),f=s.n(w),N=s(2285),v=s(53148),k=s(25545),Z=s(73229),q=s(55794);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let A=(0,p.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),D=(0,p.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var C=s(30304);function M({quotationId:e}){let[t,s]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[e]);let x=async()=>{try{l(!0);let t=await n.Z.get(`/quotations/${e}/analytics`);s(t.data.analytics)}catch(e){console.error("Failed to load analytics:",e),o("Failed to load analytics data")}finally{l(!1)}};if(i)return a.jsx("div",{className:"p-8",children:a.jsx(d.T,{})});if(c)return a.jsx("div",{className:"p-4 text-red-500 bg-red-50 rounded-lg",children:c});if(!t)return null;let m=e=>{switch(e){case"VIEWED":return a.jsx(v.Z,{className:"w-4 h-4 text-blue-500"});case"EMAIL_OPENED":return a.jsx(g.Z,{className:"w-4 h-4 text-purple-500"});case"DOWNLOADED":return a.jsx(b.Z,{className:"w-4 h-4 text-green-500"});default:return a.jsx(j.Z,{className:"w-4 h-4 text-gray-500"})}},p=e=>{switch(e){case"VIEWED":return"Viewed Quotation";case"EMAIL_OPENED":return"Email Opened";case"DOWNLOADED":return"Downloaded PDF";default:return e.replace(/_/g," ")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Views"}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:t.viewCount})]}),a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:a.jsx(v.Z,{className:"w-6 h-6 text-blue-600"})})]}),t.lastViewedAt&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-4 flex items-center",children:[a.jsx(k.Z,{className:"w-3 h-3 mr-1"}),"Last viewed: ",new Date(t.lastViewedAt).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Current Status"}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2 capitalize",children:t.status})]}),a.jsx("div",{className:`p-2 rounded-lg ${"accepted"===t.status?"bg-green-50":"rejected"===t.status?"bg-red-50":"viewed"===t.status?"bg-blue-50":"bg-gray-50"}`,children:"accepted"===t.status?a.jsx(b.Z,{className:"w-6 h-6 text-green-600"}):"rejected"===t.status?a.jsx(Z.Z,{className:"w-6 h-6 text-red-600"}):a.jsx(j.Z,{className:"w-6 h-6 text-gray-600"})})]}),t.clientAcceptedAt&&(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-4 flex items-center",children:[a.jsx(q.Z,{className:"w-3 h-3 mr-1"}),"Accepted on ",new Date(t.clientAcceptedAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email Opens"}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:t.emailOpens})]}),a.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:a.jsx(g.Z,{className:"w-6 h-6 text-purple-600"})})]}),t.lastEmailOpenedAt?(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-4 flex items-center",children:[a.jsx(k.Z,{className:"w-3 h-3 mr-1"}),"Last opened: ",new Date(t.lastEmailOpenedAt).toLocaleString()]}):a.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"No email tracking data"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Engagement"}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:t.viewCount>0?"High":t.emailOpens>0?"Medium":"Low"})]}),a.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:a.jsx(j.Z,{className:"w-6 h-6 text-orange-600"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Based on views & interactions"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Activity Log"})}),a.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:0===t.activities.length?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"No activity recorded yet."}):t.activities.map(e=>a.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gray-100 rounded-full",children:m(e.type)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:p(e.type)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[e.deviceType&&(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:["Mobile"===e.deviceType?a.jsx(A,{className:"w-3 h-3 mr-1"}):a.jsx(D,{className:"w-3 h-3 mr-1"}),e.deviceType]}),e.ipAddress&&(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-gray-500",children:[a.jsx(C.Z,{className:"w-3 h-3 mr-1"}),"::1"===e.ipAddress?"Localhost":e.ipAddress]})]})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]})},e.id))})]})]})}function S({params:e}){let t=(0,i.useRouter)(),s=(0,l.p)(),{can:p}=(0,c.g)(),{formatCurrency:w}=(0,o.U)(),[v,k]=(0,r.useState)(null),[Z,q]=(0,r.useState)(!0),[A,D]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[L,P]=(0,r.useState)(!1),[E,$]=(0,r.useState)("details");(0,r.useEffect)(()=>{z()},[e.id]);let z=async()=>{try{q(!0);let t=await N.R.getById(e.id);k(t.quotation)}catch(e){s.error("Failed to load quotation details"),t.push("/quotations")}finally{q(!1)}},T=async()=>{try{D(!0);let t=(await n.Z.post(`/quotations/${e.id}/generate-link`,{expiresInDays:30})).data.publicUrl;S(t),P(!0),s.success("Public link generated successfully!"),await z()}catch(e){s.error(e.response?.data?.error||"Failed to generate link")}finally{D(!1)}},_=async()=>{if(confirm("Are you sure you want to revoke this public link? Clients will no longer be able to access it."))try{await n.Z.post(`/quotations/${e.id}/revoke-link`),s.success("Public link revoked successfully"),await z()}catch(e){s.error(e.response?.data?.error||"Failed to revoke link")}};return Z?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx(d.T,{size:"lg"})}):v?(0,a.jsxs)("div",{className:"p-6 max-w-5xl mx-auto print:p-0 print:max-w-none",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 print:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4 md:mb-0",children:[a.jsx("button",{onClick:()=>t.back(),className:"mr-4 p-2 hover:bg-gray-100 rounded-full transition",children:a.jsx(x.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v.quotationNumber}),a.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${"accepted"===v.status?"bg-green-100 text-green-800":"sent"===v.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:v.status})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.title})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[p("Quotation","update")&&"draft"===v.status&&(0,a.jsxs)(f(),{href:`/quotations/${v.id}/edit`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>{window.print()},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:[a.jsx(h,{className:"w-4 h-4 mr-2"}),"Print"]}),p("Quotation","read")&&v.clientAcceptedAt&&(0,a.jsxs)("button",{onClick:async()=>{try{let t=await n.Z.get(`/quotations/${e.id}/signed-pdf`,{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",`Quotation-${v.quotationNumber}-Signed.pdf`),document.body.appendChild(r),r.click(),r.remove(),s.success("Signed PDF downloaded successfully")}catch(e){s.error(e.response?.data?.error||"Failed to download signed PDF")}},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none",children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Download Signed PDF"]}),p("Quotation","update")&&!v.isPublicEnabled&&(0,a.jsxs)("button",{onClick:T,disabled:A,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none disabled:opacity-50",children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),A?"Generating...":"Generate Public Link"]}),p("Quotation","update")&&"draft"===v.status&&(0,a.jsxs)("button",{onClick:async()=>{try{D(!0),await n.Z.post(`/quotations/${e.id}/send-email`),s.success("Quotation email sent successfully!"),await z()}catch(e){s.error(e.response?.data?.error||"Failed to send email")}finally{D(!1)}},disabled:A,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none disabled:opacity-50",children:[a.jsx(g.Z,{className:"w-4 h-4 mr-2"}),A?"Sending...":"Send to Client"]}),p("Quotation","update")&&"accepted"===v.status&&!v.convertedToInvoiceId&&(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none",onClick:async()=>{if(confirm("Convert to Invoice?"))try{await N.R.convertToInvoice(v.id),s.success("Converted successfully"),t.push("/invoices")}catch(e){s.error("Conversion failed")}},children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Convert to Invoice"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6 print:hidden",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>$("details"),className:`${"details"===E?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Details"}),p("Quotation","read")&&(0,a.jsxs)("button",{onClick:()=>$("analytics"),className:`${"analytics"===E?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[a.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Analytics"]})]})}),"analytics"===E?a.jsx(M,{quotationId:e.id}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-gray-100 print:shadow-none print:border-0",children:[(0,a.jsxs)("div",{className:"px-8 py-10 border-b border-gray-200 flex justify-between",children:[(0,a.jsxs)("div",{children:[v.company?.logo?a.jsx("img",{src:v.company.logo.startsWith("http")?v.company.logo:`${"http://localhost:5000/api".replace("/api","")||0}${v.company.logo}`,alt:v.company.name,className:"h-12 w-auto mb-3"}):a.jsx("div",{className:"h-10 w-auto text-2xl font-bold text-primary-600 mb-2",children:v.company?.name||"COMPANY NAME"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 max-w-xs",children:[v.company?.address&&(0,a.jsxs)(a.Fragment,{children:[v.company.address,a.jsx("br",{})]}),v.company?.city&&v.company?.state&&(0,a.jsxs)(a.Fragment,{children:[v.company.city,", ",v.company.state," - ",v.company.pincode||"",a.jsx("br",{})]}),v.company?.country&&(0,a.jsxs)(a.Fragment,{children:[v.company.country,a.jsx("br",{})]}),v.company?.email&&a.jsx(a.Fragment,{children:v.company.email}),v.company?.phone&&(0,a.jsxs)(a.Fragment,{children:[" | ",v.company.phone]})]}),v.company?.gstin&&(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["GSTIN: ",v.company.gstin]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"QUOTATION"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[a.jsx("span",{className:"font-medium",children:"Number:"})," ",v.quotationNumber]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(v.quotationDate).toLocaleDateString()]}),v.validUntil&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[a.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",new Date(v.validUntil).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"px-8 py-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Billed To"}),a.jsx("div",{className:"text-sm text-gray-900",children:v.lead&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("p",{className:"font-medium text-base",children:v.lead.name}),v.lead.company&&a.jsx("p",{children:v.lead.company}),v.lead.email&&a.jsx("p",{children:v.lead.email}),v.lead.phone&&a.jsx("p",{children:v.lead.phone})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.items?.map((e,t)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:Number(e.quantity)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:w(e.unitPrice)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium text-right",children:w(Number(e.quantity)*Number(e.unitPrice))})]},t))}),(0,a.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,a.jsxs)("tr",{children:[a.jsx("td",{colSpan:3,className:"px-6 py-3 text-right text-sm font-medium text-gray-500",children:"Subtotal"}),a.jsx("td",{className:"px-6 py-3 text-right text-sm font-medium text-gray-900",children:w(v.subtotal)})]}),(0,a.jsxs)("tr",{children:[a.jsx("td",{colSpan:3,className:"px-6 py-3 text-right text-sm font-medium text-gray-500",children:"Tax"}),a.jsx("td",{className:"px-6 py-3 text-right text-sm font-medium text-gray-900",children:w(v.tax)})]}),(0,a.jsxs)("tr",{children:[a.jsx("td",{colSpan:3,className:"px-6 py-3 text-right text-sm font-medium text-gray-500",children:"Discount"}),(0,a.jsxs)("td",{className:"px-6 py-3 text-right text-sm font-medium text-gray-900",children:["-",w(v.discount)]})]}),(0,a.jsxs)("tr",{children:[a.jsx("td",{colSpan:3,className:"px-6 py-3 text-right text-base font-bold text-gray-900",children:"Total"}),a.jsx("td",{className:"px-6 py-3 text-right text-base font-bold text-green-600",children:w(v.total)})]})]})]})}),v.notes&&(0,a.jsxs)("div",{className:"px-8 py-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Notes & Terms"}),a.jsx("p",{className:"text-sm text-gray-500 whitespace-pre-wrap",children:v.notes})]})]}),v.isPublicEnabled&&v.publicToken&&a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6 print:hidden",children:a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Public Link Active"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700 mb-3",children:["This quotation can be accessed via public link.",v.publicExpiresAt&&(0,a.jsxs)("span",{className:"block mt-1",children:["Expires: ",new Date(v.publicExpiresAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/public/quotations/${v.publicToken}`,className:"flex-1 px-3 py-2 border border-blue-300 rounded-md text-sm bg-white"}),a.jsx("button",{onClick:()=>{if(v?.publicToken){let e=`${window.location.origin}/public/quotations/${v.publicToken}`;navigator.clipboard.writeText(e),s.success("Link copied to clipboard!")}},className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700",children:"Copy Link"}),p("Quotation","update")&&a.jsx("button",{onClick:_,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700",children:"Revoke"})]}),v.clientViewedAt&&(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Viewed by client: ",new Date(v.clientViewedAt).toLocaleString()]})]})})}),(v.clientAcceptedAt||v.clientRejectedAt)&&(0,a.jsxs)("div",{className:`mt-6 border rounded-lg p-6 print:hidden ${v.clientAcceptedAt?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-lg font-semibold mb-1 ${v.clientAcceptedAt?"text-green-900":"text-red-900"}`,children:v.clientAcceptedAt?"✓ Quotation Accepted":"✗ Quotation Declined"}),a.jsx("p",{className:`text-sm ${v.clientAcceptedAt?"text-green-700":"text-red-700"}`,children:v.clientAcceptedAt?`Accepted on ${new Date(v.clientAcceptedAt).toLocaleString()}`:`Declined on ${new Date(v.clientRejectedAt).toLocaleString()}`})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Client Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[v.clientName&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),a.jsx("span",{className:"ml-2 text-gray-600",children:v.clientName})]}),v.clientEmail&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),a.jsx("span",{className:"ml-2 text-gray-600",children:v.clientEmail})]}),v.clientComments&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Comments:"}),a.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap",children:v.clientComments})]})]})]}),v.clientAcceptedAt&&v.clientSignature&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Digital Signature"}),a.jsx("div",{className:"border-2 border-gray-300 rounded-lg bg-white p-4",children:a.jsx("img",{src:v.clientSignature,alt:"Client Signature",className:"max-w-full h-auto max-h-32"})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Signed by ",v.clientName," on ",new Date(v.clientAcceptedAt).toLocaleDateString()]})]})]})]})]})]}):null}},95252:(e,t,s)=>{"use strict";s.d(t,{T:()=>r});var a=s(95344);function r({size:e="md",className:t=""}){return a.jsx("div",{className:`${{sm:"h-4 w-4 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3"}[e]} animate-spin rounded-full border-gray-300 border-t-primary-600 ${t}`,role:"status","aria-label":"Loading",children:a.jsx("span",{className:"sr-only",children:"Loading..."})})}},43989:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(92373);function r(){let{showToast:e}=(0,a.useToastContext)();return{success:t=>e("success",t),error:t=>e("error",t),warning:t=>e("warning",t),info:t=>e("info",t)}}},2285:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var a=s(18117);let r={getAll:async e=>(await a.Z.get("/quotations",{params:e})).data,getById:async e=>(await a.Z.get(`/quotations/${e}`)).data,create:async e=>(await a.Z.post("/quotations",e)).data,update:async(e,t)=>(await a.Z.put(`/quotations/${e}`,t)).data,delete:async e=>(await a.Z.delete(`/quotations/${e}`)).data,convertToInvoice:async e=>(await a.Z.post(`/quotations/${e}/convert-to-invoice`)).data}},88534:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},63024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},16469:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},98026:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},38330:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},55794:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},45777:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},25545:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1960:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},85674:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},96885:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},53148:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},83606:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},37121:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},30304:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},33517:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},2273:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},56857:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]])},48120:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},71206:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},98200:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},75695:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},21096:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]])},15786:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},89895:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},73229:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},22254:(e,t,s)=>{e.exports=s(14767)},91381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(86843).createProxy)(String.raw`/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/quotations/[id]/page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[6291,1934,783,7316,2841],()=>s(93431));module.exports=a})();