(()=>{var e={};e.id=4175,e.ids=[4175],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},8878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>l});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),o=s(68300),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l=["",{children:["(main)",{children:["invoices",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8690)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/invoices/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22758)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,12962)),"/Users/arun/Documents/applizor-softech-erp/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/invoices/page.tsx"],d="/(main)/invoices/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/invoices/page",pathname:"/invoices",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},48896:(e,t,s)=>{Promise.resolve().then(s.bind(s,27293))},27293:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(95344),a=s(43989),i=s(3729),n=s(22254),o=s(20783),c=s.n(o),l=s(67857),u=s(25045),d=s(88581),p=s(73050);function x(){(0,a.p)();let e=(0,n.useRouter)(),{formatCurrency:t}=(0,p.U)(),[s,o]=(0,i.useState)([]),[x,g]=(0,i.useState)([]),[m,h]=(0,i.useState)(!0),[y,v]=(0,i.useState)(!1),[f,w]=(0,i.useState)({clientId:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],items:[{description:"",quantity:1,rate:0}],tax:0,discount:0,notes:""});(0,i.useEffect)(()=>{if(!l.I.isAuthenticated()){e.push("/login");return}b(),j()},[e]);let b=async()=>{try{h(!0);let e=await u.i.getAll({limit:50});o(e.invoices||[])}catch(e){console.error("Failed to load invoices:",e)}finally{h(!1)}},j=async()=>{try{let e=await d.t.getAll({limit:100});g(e.clients||[])}catch(e){console.error("Failed to load clients:",e)}},q=e=>({draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return r.jsx("div",{className:"px-4 py-6 sm:px-0",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoices"}),r.jsx(c(),{href:"/invoices/create",className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700",children:"+ Create New"})]}),m?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):0===s.length?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No invoices found"}):r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:r.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(e=>r.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:r.jsx(c(),{href:`/invoices/${e.id}`,className:"block",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.invoiceNumber})}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.client?.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Due ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t(e.total)}),r.jsx("span",{className:`px-2 py-1 text-xs rounded ${q(e.status)}`,children:e.status})]})]})})},e.id))})})]})})}},43989:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var r=s(92373);function a(){let{showToast:e}=(0,r.useToastContext)();return{success:t=>e("success",t),error:t=>e("error",t),warning:t=>e("warning",t),info:t=>e("info",t)}}},88581:(e,t,s)=>{"use strict";s.d(t,{t:()=>a});var r=s(18117);let a={getAll:async e=>(await r.Z.get("/clients",{params:e})).data,getById:async e=>(await r.Z.get(`/clients/${e}`)).data,create:async e=>(await r.Z.post("/clients",e)).data,update:async(e,t)=>(await r.Z.put(`/clients/${e}`,t)).data,delete:async e=>(await r.Z.delete(`/clients/${e}`)).data}},25045:(e,t,s)=>{"use strict";s.d(t,{i:()=>a});var r=s(18117);let a={getAll:async e=>(await r.Z.get("/invoices",{params:e})).data,getById:async e=>(await r.Z.get(`/invoices/${e}`)).data,create:async e=>(await r.Z.post("/invoices",e)).data,generatePDF:async(e,t)=>(await r.Z.get(`/invoices/${e}/pdf`,{params:{letterheadMode:t},responseType:"blob"})).data,updateStatus:async(e,t)=>(await r.Z.patch(`/invoices/${e}/status`,{status:t})).data,sendEmail:async e=>(await r.Z.post(`/invoices/${e}/send`)).data}},67857:(e,t,s)=>{"use strict";s.d(t,{I:()=>i,a:()=>n});var r=s(18117),a=s(3729);let i={register:async e=>{let t=await r.Z.post("/auth/register",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data},login:async(e,t)=>{let s=await r.Z.post("/auth/login",{email:e,password:t});return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>null,getUser:()=>null,isAuthenticated:()=>!!i.getToken()},n=()=>{let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{let e=i.getUser();if(e&&t(e),i.getToken())try{let e=await r.Z.get("/auth/profile");if(e.data.user){let s=e.data.user;localStorage.setItem("user",JSON.stringify(s)),t(s)}}catch(e){console.error("Auth refresh failed",e)}n(!1)})()},[]),{user:e,loading:s,isAuthenticated:!!e}}},22254:(e,t,s)=>{e.exports=s(14767)},8690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`/Users/arun/Documents/applizor-softech-erp/frontend/app/(main)/invoices/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[6291,1934,783,3553],()=>s(8878));module.exports=r})();