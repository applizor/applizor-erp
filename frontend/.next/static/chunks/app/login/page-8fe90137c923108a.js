(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{47968:function(e,t,r){Promise.resolve().then(r.bind(r,44338))},44338:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(57437),s=r(2265),o=r(24033),n=r(54175);function i(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[u,d]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),g=async r=>{r.preventDefault(),d(""),m(!0);try{await n.I.login(t,i),e.push("/dashboard")}catch(e){var a,s;d((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Login failed")}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"Sign in to Applizor ERP"})}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:g,children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:i,onChange:e=>l(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:c?"Signing in...":"Sign in"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("a",{href:"/register",className:"text-sm text-primary-600 hover:text-primary-500",children:"Don't have an account? Register"})})]})]})})}},10826:function(e,t,r){"use strict";let a=r(54829).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)}),t.Z=a},54175:function(e,t,r){"use strict";r.d(t,{I:function(){return o},a:function(){return n}});var a=r(10826),s=r(2265);let o={register:async e=>{let t=await a.Z.post("/auth/register",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data},login:async(e,t)=>{let r=await a.Z.post("/auth/login",{email:e,password:t});return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>localStorage.getItem("token"),getUser:()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated:()=>!!o.getToken()},n=()=>{let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{let e=o.getUser();if(e&&t(e),o.getToken())try{let e=await a.Z.get("/auth/profile");if(e.data.user){let r=e.data.user;localStorage.setItem("user",JSON.stringify(r)),t(r)}}catch(e){console.error("Auth refresh failed",e)}n(!1)})()},[]),{user:e,loading:r,isAuthenticated:!!e}}},24033:function(e,t,r){e.exports=r(15313)}},function(e){e.O(0,[4737,2971,4938,1744],function(){return e(e.s=47968)}),_N_E=e.O()}]);