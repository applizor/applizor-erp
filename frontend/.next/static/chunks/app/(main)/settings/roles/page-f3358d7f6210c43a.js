(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1346],{67810:function(e,s,t){Promise.resolve().then(t.bind(t,77301))},77301:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var r=t(57437),l=t(61153),n=t(2265),i=t(61396),a=t.n(i),o=t(24033);function c(){let e=(0,l.p)(),[s,t]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0);(0,o.useRouter)(),(0,n.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat("http://localhost:5000/api","/roles"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();t(e)}}catch(e){console.error("Failed to fetch roles",e)}finally{c(!1)}};return(0,r.jsxs)("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Roles & Permissions"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage user roles and access control"})]}),(0,r.jsx)(a(),{href:"/settings/roles/create",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Create New Role"})]}),(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200",children:[s.map(e=>{var s;return(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"px-4 py-4 flex items-center sm:px-6",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-primary-600 truncate",children:e.name}),e.isSystem&&(0,r.jsx)("span",{className:"ml-2 flex-shrink-0 inline-block px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:"System Default"})]}),(0,r.jsx)("div",{className:"mt-2 flex",children:(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-500",children:(0,r.jsx)("p",{className:"truncate",children:e.description||"No description"})})})]}),(0,r.jsx)("div",{className:"mt-4 flex-shrink-0 sm:mt-0 sm:ml-5",children:(0,r.jsx)("div",{className:"flex overflow-hidden -space-x-1",children:(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[(null===(s=e._count)||void 0===s?void 0:s.userRoles)||0," users assigned"]})})})]}),(0,r.jsx)("div",{className:"ml-5 flex-shrink-0",children:(0,r.jsx)(a(),{href:"/settings/roles/".concat(e.id),className:"text-primary-600 hover:text-primary-900 font-medium",children:"Edit"})})]})},e.id)}),!i&&0===s.length&&(0,r.jsx)("li",{className:"px-4 py-8 text-center text-gray-500",children:"No roles found. Create one to get started."})]})}),(0,r.jsxs)("div",{className:"mt-8 bg-blue-50 p-4 rounded-md",children:[(0,r.jsx)("h3",{className:"text-blue-800 font-medium",children:"Auto-Sync Permissions"}),(0,r.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"If you deployed new modules, click below to sync system permissions."}),(0,r.jsx)("button",{onClick:async()=>{let s=localStorage.getItem("token");await fetch("".concat("http://localhost:5000/api","/api/roles/sync-permissions"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)}}),e.info("Permissions Synced!")},className:"mt-2 text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded border border-blue-200 hover:bg-blue-200",children:"Sync System Permissions"})]})]})}},89456:function(e,s,t){"use strict";t.r(s),t.d(s,{ToastProvider:function(){return o},useToastContext:function(){return c}});var r=t(57437),l=t(2265);function n(e){let{id:s,type:t,message:n,onClose:i}=e;(0,l.useEffect)(()=>{let e=setTimeout(()=>i(s),5e3);return()=>clearTimeout(e)},[s,i]);let a={success:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:(0,r.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};return(0,r.jsx)("div",{className:"".concat({success:"bg-green-50 border-green-500 text-green-800",error:"bg-red-50 border-red-500 text-red-800",warning:"bg-yellow-50 border-yellow-500 text-yellow-800",info:"bg-blue-50 border-blue-500 text-blue-800"}[t]," border-l-4 p-4 rounded-lg shadow-lg mb-2 animate-slide-in-right max-w-md"),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:a[t]}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:n})}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,r.jsxs)("button",{onClick:()=>i(s),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}function i(e){let{toasts:s,onClose:t}=e;return(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:s.map(e=>(0,r.jsx)(n,{id:e.id,type:e.type,message:e.message,onClose:t},e.id))})}let a=(0,l.createContext)(void 0);function o(e){let{children:s}=e,[t,n]=(0,l.useState)([]),o=e=>{n(s=>s.filter(s=>s.id!==e))};return(0,r.jsxs)(a.Provider,{value:{toasts:t,showToast:(e,s)=>{let t=Date.now().toString()+Math.random().toString(36);n(r=>[...r,{id:t,type:e,message:s}])},removeToast:o},children:[s,(0,r.jsx)(i,{toasts:t,onClose:o})]})}function c(){let e=(0,l.useContext)(a);if(!e)throw Error("useToastContext must be used within ToastProvider");return e}},61153:function(e,s,t){"use strict";t.d(s,{p:function(){return l}});var r=t(89456);function l(){let{showToast:e}=(0,r.useToastContext)();return{success:s=>e("success",s),error:s=>e("error",s),warning:s=>e("warning",s),info:s=>e("info",s)}}},30622:function(e,s,t){"use strict";var r=t(2265),l=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,s,t){var r,n={},c=null,d=null;for(r in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)i.call(s,r)&&!o.hasOwnProperty(r)&&(n[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return{$$typeof:l,type:e,key:c,ref:d,props:n,_owner:a.current}}s.Fragment=n,s.jsx=c,s.jsxs=c},57437:function(e,s,t){"use strict";e.exports=t(30622)},24033:function(e,s,t){e.exports=t(15313)}},function(e){e.O(0,[1396,2971,4938,1744],function(){return e(e.s=67810)}),_N_E=e.O()}]);