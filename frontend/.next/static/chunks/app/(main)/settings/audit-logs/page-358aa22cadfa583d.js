(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{99268:function(e,t,s){Promise.resolve().then(s.bind(s,66780))},66780:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(57437),r=s(2265);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)({page:1,limit:20,total:0,pages:1});(0,r.useEffect)(()=>{c(n.page)},[n.page]);let c=async e=>{i(!0);try{let s=localStorage.getItem("token"),a=await fetch("".concat("http://localhost:5000/api","/api/audit-logs?page=").concat(e,"&limit=").concat(n.limit),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){let e=await a.json();t(e.logs),l(e.pagination)}}catch(e){console.error("Failed to fetch audit logs")}finally{i(!1)}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Audit Logs"}),(0,a.jsx)("p",{className:"mb-6 text-sm text-gray-500",children:"Track system activities and security events."}),(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Module"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.user?"".concat(e.user.firstName," ").concat(e.user.lastName):"System / Unknown"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("LOGIN"===e.action?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.action})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.module}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.details||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.ipAddress||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]},e.id)),!s&&0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-500",children:"No logs found."})}),s&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-10 text-center text-gray-500",children:"Loading..."})})]})]}),(0,a.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,a.jsx)("button",{onClick:()=>l({...n,page:Math.max(1,n.page-1)}),disabled:1===n.page,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>l({...n,page:Math.min(n.pages,n.page+1)}),disabled:n.page===n.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,a.jsx)("span",{className:"font-medium",children:(n.page-1)*n.limit+1})," to ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(n.page*n.limit,n.total)})," of ",(0,a.jsx)("span",{className:"font-medium",children:n.total})," results"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,a.jsxs)("button",{onClick:()=>l({...n,page:Math.max(1,n.page-1)}),disabled:1===n.page,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,a.jsx)("span",{className:"sr-only",children:"Previous"}),"←"]}),(0,a.jsxs)("button",{onClick:()=>l({...n,page:Math.min(n.pages,n.page+1)}),disabled:n.page===n.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,a.jsx)("span",{className:"sr-only",children:"Next"}),"→"]})]})})]})]})]})]})}},30622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,i={},d=null,o=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(o=t.ref),t)n.call(t,a)&&!c.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:r,type:e,key:d,ref:o,props:i,_owner:l.current}}t.Fragment=i,t.jsx=d,t.jsxs=d},57437:function(e,t,s){"use strict";e.exports=s(30622)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=99268)}),_N_E=e.O()}]);