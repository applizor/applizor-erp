(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9796],{6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},41298:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},25094:function(e,t,s){Promise.resolve().then(s.bind(s,59223))},59223:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var a=s(57437),l=s(2265),r=s(24033),i=s(61396),d=s.n(i),n=s(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var o=s(1295),m=s(28203);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,n.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var u=s(6141),h=s(73067);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,n.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var g=s(49617),p=s(45367),v=s(98253),j=s(9883),f=s(13008),b=s(41298),N=s(10826),w=s(61153),C=s(43206),D=s(1327),k=s(61079),A=s(7319),S=s(18559);function Z(){var e,t;let s=(0,r.useRouter)(),i=(0,r.useParams)(),n=(0,w.p)(),{can:Z}=(0,C.g)(),{formatCurrency:L}=(0,S.U)(),[z,F]=(0,l.useState)(null),[I,T]=(0,l.useState)([]),[E,P]=(0,l.useState)(!0),[U,q]=(0,l.useState)(!1),[M,O]=(0,l.useState)(!1),[_,H]=(0,l.useState)(!1),[R,V]=(0,l.useState)(!1),[Q,W]=(0,l.useState)(!1),[B,J]=(0,l.useState)(!1),[$,G]=(0,l.useState)(null),[K,X]=(0,l.useState)({type:"call",title:"",description:"",scheduledAt:"",dueDate:"",status:"pending",outcome:""});(0,l.useEffect)(()=>{i.id&&(Y(i.id),ee(i.id))},[i.id]);let Y=async e=>{try{let t=await N.Z.get("/leads/".concat(e)),s=t.data.lead||t.data;console.log("Lead data:",s),F(s)}catch(e){var t,a;console.error("Load lead error:",e),n.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to load lead"),s.push("/leads/list")}finally{P(!1)}},ee=async e=>{try{let t=await N.Z.get("/leads/".concat(e,"/activities"));T(t.data.activities||[])}catch(e){console.error("Failed to load activities")}},et=async()=>{if(z){O(!0);try{await N.Z.delete("/leads/".concat(z.id)),n.success("Lead deleted successfully"),s.push("/leads/list")}catch(s){var e,t;n.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to delete lead"),O(!1)}}},es=async()=>{if(z){V(!1),H(!0);try{await N.Z.post("/leads/".concat(z.id,"/convert-to-client")),n.success("Lead converted to client successfully"),s.push("/clients")}catch(s){var e,t;n.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to convert lead")}finally{H(!1)}}},ea=async e=>{if(e.preventDefault(),!z||!K.title.trim()){n.error("Activity title is required");return}J(!0);try{$?(await N.Z.put("/leads/".concat(z.id,"/activities/").concat($.id),K),n.success("Activity updated successfully")):(await N.Z.post("/leads/".concat(z.id,"/activities"),K),n.success("Activity added successfully")),W(!1),G(null),X({type:"call",title:"",description:"",scheduledAt:"",dueDate:"",status:"pending",outcome:""}),ee(z.id),Y(z.id)}catch(e){var t,s;n.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to ".concat($?"update":"add"," activity"))}finally{J(!1)}},el=e=>{G(e),X({type:e.type||"call",title:e.title||"",description:e.description||"",scheduledAt:e.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"",dueDate:e.dueDate?new Date(e.dueDate).toISOString().slice(0,16):"",status:e.status||"pending",outcome:e.outcome||""}),W(!0)},er=async e=>{if(confirm("Are you sure you want to delete this activity?"))try{await N.Z.delete("/leads/".concat(z.id,"/activities/").concat(e)),n.success("Activity deleted successfully"),ee(z.id)}catch(e){var t,s;n.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to delete activity")}},ei=async e=>{let t=prompt("Enter outcome (optional):");try{await N.Z.post("/leads/".concat(z.id,"/activities/").concat(e,"/complete"),{outcome:t}),n.success("Activity marked as completed"),ee(z.id),Y(z.id)}catch(e){var s,a;n.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||"Failed to complete activity")}};if(E)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)(A.T,{size:"lg"})});if(!z)return null;let ed=e=>{switch(e){case"call":return(0,a.jsx)(c,{size:16,className:"text-blue-600"});case"email":return(0,a.jsx)(o.Z,{size:16,className:"text-purple-600"});case"meeting":return(0,a.jsx)(m.Z,{size:16,className:"text-green-600"});case"note":return(0,a.jsx)(x,{size:16,className:"text-gray-600"});default:return(0,a.jsx)(u.Z,{size:16,className:"text-gray-600"})}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(d(),{href:"/leads/list",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[(0,a.jsx)(h.Z,{size:16,className:"mr-1"}),"Back to Leads"]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-16 w-16 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-primary-600 font-bold text-2xl",children:(null===(e=z.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"L"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:z.name}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({new:"bg-blue-100 text-blue-800",contacted:"bg-purple-100 text-purple-800",qualified:"bg-green-100 text-green-800",proposal:"bg-yellow-100 text-yellow-800",negotiation:"bg-orange-100 text-orange-800",won:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800"}[z.status]||"bg-gray-100 text-gray-800"),children:z.status}),(0,a.jsxs)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-red-100 text-red-800"}[z.priority]||"bg-gray-100 text-gray-800"),children:[z.priority," priority"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[Z("Lead","update")&&Z("Client","create")&&(0,a.jsxs)("button",{onClick:()=>V(!0),disabled:_||"won"===z.status,className:"inline-flex items-center px-4 py-2 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-white hover:bg-green-50 transition-colors disabled:opacity-50",children:[(0,a.jsx)(y,{size:16,className:"mr-2"}),_?"Converting...":"Convert to Client"]}),(0,a.jsx)(D.n,{module:"Lead",action:"update",children:(0,a.jsxs)(d(),{href:"/leads/".concat(z.id,"/edit"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(g.Z,{size:16,className:"mr-2"}),"Edit"]})}),(0,a.jsx)(D.n,{module:"Lead",action:"delete",children:(0,a.jsxs)("button",{onClick:()=>q(!0),className:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 transition-colors",children:[(0,a.jsx)(p.Z,{size:16,className:"mr-2"}),"Delete"]})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(o.Z,{className:"mr-2 text-primary-600",size:20}),"Contact Information"]}),(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.email||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.phone||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Job Title"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.jobTitle||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Website"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.website?(0,a.jsx)("a",{href:z.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800",children:z.website}):"-"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(v.Z,{className:"mr-2 text-primary-600",size:20}),"Company Information"]}),(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Company"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.company||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Industry"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.industry||"-"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Lead Details"}),(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Source"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:(null===(t=z.source)||void 0===t?void 0:t.replace("-"," "))||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Source Details"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:z.sourceDetails||"-"})]}),z.nextFollowUpAt&&(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Next Follow-up"}),(0,a.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[(0,a.jsx)(u.Z,{size:16,className:"mr-2 text-orange-600"}),new Date(z.nextFollowUpAt).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Notes"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:z.notes||"-"})]}),z.tags&&z.tags.length>0&&(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 mb-2",children:"Tags"}),(0,a.jsx)("dd",{className:"flex flex-wrap gap-2",children:z.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:e},t))})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(u.Z,{className:"mr-2 text-primary-600",size:20}),"Activities"]}),Z("LeadActivity","create")&&(0,a.jsxs)("button",{onClick:()=>W(!0),className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-xs font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,a.jsx)(j.Z,{size:14,className:"mr-1"}),"Add"]})]}),0===I.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No activities yet"}):(0,a.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[I.slice(0,5).map(e=>(0,a.jsx)("div",{className:"border-l-4 border-primary-200 pl-3 py-2 hover:bg-gray-50 rounded-r transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"mt-0.5 mr-2",children:ed(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500 flex-wrap",children:[(0,a.jsx)("span",{className:"capitalize",children:e.type}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()}),e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:["pending"===e.status&&Z("LeadActivity","update")&&(0,a.jsx)("button",{onClick:()=>ei(e.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Mark as complete",children:(0,a.jsx)(f.Z,{size:14})}),Z("LeadActivity","update")&&(0,a.jsx)("button",{onClick:()=>el(e),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:(0,a.jsx)(g.Z,{size:14})}),Z("LeadActivity","delete")&&(0,a.jsx)("button",{onClick:()=>er(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:(0,a.jsx)(p.Z,{size:14})})]})]})},e.id)),I.length>5&&(0,a.jsxs)(d(),{href:"/leads/".concat(z.id,"/activities"),className:"block text-center text-sm text-primary-600 hover:text-primary-800 pt-2",children:["View all ",I.length," activities →"]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(b.Z,{className:"mr-2 text-primary-600",size:20}),"Lead Value"]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-primary-600",children:z.value?L(parseFloat(z.value)):"-"}),z.probability&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Probability"}),(0,a.jsxs)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:[z.probability,"%"]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(m.Z,{className:"mr-2 text-primary-600",size:20}),"Information"]}),(0,a.jsxs)("dl",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(z.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(z.updatedAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),z.lastContactedAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Contacted"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(z.lastContactedAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})]}),Q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:$?"Edit Activity":"Add Activity"}),(0,a.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type *"}),(0,a.jsxs)("select",{value:K.type,onChange:e=>X({...K,type:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:!0,children:[(0,a.jsx)("option",{value:"call",children:"\uD83D\uDCDE Call"}),(0,a.jsx)("option",{value:"email",children:"\uD83D\uDCE7 Email"}),(0,a.jsx)("option",{value:"meeting",children:"\uD83D\uDCC5 Meeting"}),(0,a.jsx)("option",{value:"note",children:"\uD83D\uDCDD Note"}),(0,a.jsx)("option",{value:"task",children:"✅ Task"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsxs)("select",{value:K.status,onChange:e=>X({...K,status:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:K.title,onChange:e=>X({...K,title:e.target.value}),placeholder:"e.g., Follow-up call with client",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{value:K.description,onChange:e=>X({...K,description:e.target.value}),rows:3,placeholder:"Add details about this activity...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Scheduled Date/Time"}),(0,a.jsx)("input",{type:"datetime-local",value:K.scheduledAt,onChange:e=>X({...K,scheduledAt:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"When this activity is planned"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,a.jsx)("input",{type:"datetime-local",value:K.dueDate,onChange:e=>X({...K,dueDate:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Deadline for completion"})]})]}),"completed"===K.status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outcome"}),(0,a.jsx)("input",{type:"text",value:K.outcome,onChange:e=>X({...K,outcome:e.target.value}),placeholder:"e.g., Successful, No answer, Rescheduled",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{W(!1),G(null),X({type:"call",title:"",description:"",scheduledAt:"",dueDate:"",status:"pending",outcome:""})},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:B,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:B?"Saving...":$?"Update Activity":"Save Activity"})]})]})]})}),(0,a.jsx)(k.Q,{isOpen:R,onClose:()=>V(!1),onConfirm:es,title:"Convert Lead to Client",message:'Are you sure you want to convert "'.concat(null==z?void 0:z.name,'" to a client? This will create a new client record and mark this lead as won.'),confirmText:"Convert to Client",cancelText:"Cancel",type:"warning",isLoading:_}),(0,a.jsx)(k.Q,{isOpen:U,onClose:()=>q(!1),onConfirm:et,title:"Delete Lead",message:'Are you sure you want to delete "'.concat(z.name,'"? This action cannot be undone.'),confirmText:"Delete",cancelText:"Cancel",type:"danger",isLoading:M})]})}},18559:function(e,t,s){"use strict";s.d(t,{T:function(){return d},U:function(){return n}});var a=s(57437),l=s(2265),r=s(10826);let i=(0,l.createContext)(void 0),d=e=>{let{children:t}=e,[s,d]=(0,l.useState)("USD"),[n,c]=(0,l.useState)(!0),o=async()=>{try{if(localStorage.getItem("token")){var e,t;let s=await r.Z.get("/company");(null===(t=s.data)||void 0===t?void 0:null===(e=t.company)||void 0===e?void 0:e.currency)&&d(s.data.company.currency)}}catch(e){console.error("Failed to fetch currency settings",e)}finally{c(!1)}};(0,l.useEffect)(()=>{o()},[]);let m="INR"===s?"₹":"$";return(0,a.jsx)(i.Provider,{value:{currency:s,symbol:m,formatCurrency:e=>{if(null==e||""===e)return"".concat(m,"0.00");let t=Number(e);return isNaN(t)?"".concat(m,"0.00"):new Intl.NumberFormat("INR"===s?"en-IN":"en-US",{style:"currency",currency:s,minimumFractionDigits:2}).format(t)},refreshCurrency:o,loading:n},children:t})},n=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("useCurrency must be used within a CurrencyProvider");return e}}},function(e){e.O(0,[4737,1396,1888,2971,4938,1744],function(){return e(e.s=25094)}),_N_E=e.O()}]);