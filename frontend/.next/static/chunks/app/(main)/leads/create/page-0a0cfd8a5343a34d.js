(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5513],{62898:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var s=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,r)=>{let t=(0,s.forwardRef)(({color:t="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:c,...u},m)=>(0,s.createElement)("svg",{ref:m,...a,width:l,height:l,stroke:t,strokeWidth:i?24*Number(n)/Number(l):n,className:["lucide",`lucide-${o(e)}`,d].join(" "),...u},[...r.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(c)?c:[c]]));return t.displayName=`${e}`,t}},86165:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},54386:function(e,r,t){Promise.resolve().then(t.bind(t,26851))},26851:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var s=t(57437),a=t(61153),o=t(2265),l=t(24033),n=t(10826),i=t(18559),d=t(43206),c=t(48750);function u(){let e=(0,a.p)(),r=(0,l.useRouter)(),{currency:t}=(0,i.U)(),{can:u,user:m}=(0,d.g)(),[x,h]=(0,o.useState)(!1);if(m&&!u("Lead","create"))return(0,s.jsx)(c.Z,{});let[p,g]=(0,o.useState)({name:"",email:"",phone:"",company:"",jobTitle:"",website:"",industry:"",value:"",source:"website",sourceDetails:"",status:"new",priority:"medium",notes:"",tags:""}),f=async t=>{t.preventDefault(),h(!0);let s={...p,tags:p.tags.split(",").map(e=>e.trim()).filter(e=>""!==e),value:p.value?String(p.value):""};try{await n.Z.post("/leads",s),e.success("Lead created successfully"),r.push("/leads")}catch(r){var a,o;console.error("Error creating lead",r),e.error((null===(o=r.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.error)||"Failed to create lead")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Lead"}),(0,s.jsxs)("form",{onSubmit:f,className:"bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,s.jsx)("input",{type:"text",id:"name",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.name,onChange:e=>g({...p,name:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"jobTitle",className:"block text-sm font-medium text-gray-700",children:"Job Title"}),(0,s.jsx)("input",{type:"text",id:"jobTitle",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.jobTitle,onChange:e=>g({...p,jobTitle:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.email,onChange:e=>g({...p,email:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,s.jsx)("input",{type:"tel",id:"phone",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.phone,onChange:e=>g({...p,phone:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"Company"}),(0,s.jsx)("input",{type:"text",id:"company",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.company,onChange:e=>g({...p,company:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,s.jsx)("input",{type:"url",id:"website",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.website,onChange:e=>g({...p,website:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),(0,s.jsxs)("select",{id:"priority",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md capitalize",value:p.priority,onChange:e=>g({...p,priority:e.target.value}),children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"value",className:"block text-sm font-medium text-gray-700",children:["Estimated Value (",t,")"]}),(0,s.jsx)("input",{type:"number",id:"value",min:"0",step:"0.01",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.value,onChange:e=>g({...p,value:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"source",className:"block text-sm font-medium text-gray-700",children:"Source"}),(0,s.jsxs)("select",{id:"source",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",value:p.source,onChange:e=>g({...p,source:e.target.value}),children:[(0,s.jsx)("option",{value:"website",children:"Website"}),(0,s.jsx)("option",{value:"referral",children:"Referral"}),(0,s.jsx)("option",{value:"linkedin",children:"LinkedIn"}),(0,s.jsx)("option",{value:"cold_call",children:"Cold Call"}),(0,s.jsx)("option",{value:"social_media",children:"Social Media"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sourceDetails",className:"block text-sm font-medium text-gray-700",children:"Source Details"}),(0,s.jsx)("input",{type:"text",id:"sourceDetails",placeholder:"e.g. Campaign Name",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.sourceDetails,onChange:e=>g({...p,sourceDetails:e.target.value})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,s.jsx)("textarea",{id:"notes",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.notes,onChange:e=>g({...p,notes:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (comma separated)"}),(0,s.jsx)("input",{type:"text",id:"tags",placeholder:"e.g. tech, important, q1",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:p.tags,onChange:e=>g({...p,tags:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r.back(),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50",children:x?"Creating...":"Create Lead"})]})]})]})}},48750:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(57437),a=t(61396),o=t.n(a),l=t(86165);function n(){return(0,s.jsxs)("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-4",children:[(0,s.jsx)("div",{className:"bg-red-50 p-4 rounded-full mb-4",children:(0,s.jsx)(l.Z,{className:"h-12 w-12 text-red-600"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6 max-w-md",children:"You do not have the necessary permissions to view this page. Please contact your administrator if you believe this is an error."}),(0,s.jsx)(o(),{href:"/dashboard",className:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Return to Dashboard"})]})}},18559:function(e,r,t){"use strict";t.d(r,{T:function(){return n},U:function(){return i}});var s=t(57437),a=t(2265),o=t(10826);let l=(0,a.createContext)(void 0),n=e=>{let{children:r}=e,[t,n]=(0,a.useState)("USD"),[i,d]=(0,a.useState)(!0),c=async()=>{try{if(localStorage.getItem("token")){var e,r;let t=await o.Z.get("/company");(null===(r=t.data)||void 0===r?void 0:null===(e=r.company)||void 0===e?void 0:e.currency)&&n(t.data.company.currency)}}catch(e){console.error("Failed to fetch currency settings",e)}finally{d(!1)}};(0,a.useEffect)(()=>{c()},[]);let u="INR"===t?"â‚¹":"$";return(0,s.jsx)(l.Provider,{value:{currency:t,symbol:u,formatCurrency:e=>{if(null==e||""===e)return"".concat(u,"0.00");let r=Number(e);return isNaN(r)?"".concat(u,"0.00"):new Intl.NumberFormat("INR"===t?"en-IN":"en-US",{style:"currency",currency:t,minimumFractionDigits:2}).format(r)},refreshCurrency:c,loading:i},children:r})},i=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},89456:function(e,r,t){"use strict";t.r(r),t.d(r,{ToastProvider:function(){return i},useToastContext:function(){return d}});var s=t(57437),a=t(2265);function o(e){let{id:r,type:t,message:o,onClose:l}=e;(0,a.useEffect)(()=>{let e=setTimeout(()=>l(r),5e3);return()=>clearTimeout(e)},[r,l]);let n={success:(0,s.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:(0,s.jsx)("svg",{className:"h-5 w-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:(0,s.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};return(0,s.jsx)("div",{className:"".concat({success:"bg-green-50 border-green-500 text-green-800",error:"bg-red-50 border-red-500 text-red-800",warning:"bg-yellow-50 border-yellow-500 text-yellow-800",info:"bg-blue-50 border-blue-500 text-blue-800"}[t]," border-l-4 p-4 rounded-lg shadow-lg mb-2 animate-slide-in-right max-w-md"),children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:n[t]}),(0,s.jsx)("div",{className:"ml-3 flex-1",children:(0,s.jsx)("p",{className:"text-sm font-medium",children:o})}),(0,s.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,s.jsxs)("button",{onClick:()=>l(r),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,s.jsx)("span",{className:"sr-only",children:"Close"}),(0,s.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}function l(e){let{toasts:r,onClose:t}=e;return(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(e=>(0,s.jsx)(o,{id:e.id,type:e.type,message:e.message,onClose:t},e.id))})}let n=(0,a.createContext)(void 0);function i(e){let{children:r}=e,[t,o]=(0,a.useState)([]),i=e=>{o(r=>r.filter(r=>r.id!==e))};return(0,s.jsxs)(n.Provider,{value:{toasts:t,showToast:(e,r)=>{let t=Date.now().toString()+Math.random().toString(36);o(s=>[...s,{id:t,type:e,message:r}])},removeToast:i},children:[r,(0,s.jsx)(l,{toasts:t,onClose:i})]})}function d(){let e=(0,a.useContext)(n);if(!e)throw Error("useToastContext must be used within ToastProvider");return e}},43206:function(e,r,t){"use strict";t.d(r,{g:function(){return a}});var s=t(54175);let a=()=>{let{user:e}=(0,s.a)();return{can:(r,t)=>{var s;if(!e)return!1;if(null===(s=e.roles)||void 0===s?void 0:s.some(e=>"admin"===e.toLowerCase()||"administrator"===e.toLowerCase()))return!0;if(!e.permissions)return!1;let a=e.permissions[r];if(!a)return!1;let o="none";switch(t){case"create":o=a.createLevel;break;case"read":o=a.readLevel;break;case"update":o=a.updateLevel;break;case"delete":o=a.deleteLevel}return"none"!==o&&void 0!==o},getScope:(r,t)=>{var s;if(!e||!e.permissions||!e.permissions[r])return"none";if(null===(s=e.roles)||void 0===s?void 0:s.some(e=>"admin"===e.toLowerCase()))return"all";let a=e.permissions[r],o="none";switch(t){case"create":o=a.createLevel;break;case"read":o=a.readLevel;break;case"update":o=a.updateLevel;break;case"delete":o=a.deleteLevel}return o},user:e}}},61153:function(e,r,t){"use strict";t.d(r,{p:function(){return a}});var s=t(89456);function a(){let{showToast:e}=(0,s.useToastContext)();return{success:r=>e("success",r),error:r=>e("error",r),warning:r=>e("warning",r),info:r=>e("info",r)}}},10826:function(e,r,t){"use strict";let s=t(54829).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let r=localStorage.getItem("token");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var r;return(null===(r=e.response)||void 0===r?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)}),r.Z=s},54175:function(e,r,t){"use strict";t.d(r,{I:function(){return o},a:function(){return l}});var s=t(10826),a=t(2265);let o={register:async e=>{let r=await s.Z.post("/auth/register",e);return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},login:async(e,r)=>{let t=await s.Z.post("/auth/login",{email:e,password:r});return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>localStorage.getItem("token"),getUser:()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated:()=>!!o.getToken()},l=()=>{let[e,r]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{let e=o.getUser();if(e&&r(e),o.getToken())try{let e=await s.Z.get("/auth/profile");if(e.data.user){let t=e.data.user;localStorage.setItem("user",JSON.stringify(t)),r(t)}}catch(e){console.error("Auth refresh failed",e)}l(!1)})()},[]),{user:e,loading:t,isAuthenticated:!!e}}},24033:function(e,r,t){e.exports=t(15313)}},function(e){e.O(0,[4737,1396,2971,4938,1744],function(){return e(e.s=54386)}),_N_E=e.O()}]);